%%% ===========================
%%% –£–ü–†–ê–í–õ–ï–ù–ò–ï –®–†–ò–§–¢–ê–ú–ò
%%% ===========================
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{xememoir-fonts}[2025/11/01 v3.0 Font setup for xememoir]
\RequirePackage{fontspec}

%%% ‚öôÔ∏è –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤
\defaultfontfeatures{Ligatures=TeX} % –í–∫–ª—é—á–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ª–∏–≥–∞—Ç—É—Ä—ã TeX.

% \RequirePackage{amsmath}
% \RequirePackage{amssymb}
% \RequirePackage{amsfonts}

%%% ---------------------------
%%% üîë –£—Å–ª–æ–≤–Ω—ã–µ —Ñ–ª–∞–≥–∏ –¥–ª—è —à—Ä–∏—Ñ—Ç–æ–≤
%%% ---------------------------
% –ò—Ö –Ω–∞–¥–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ xememoir.sty
% \iffontfamily@cmu , \iffontfamily@ms, \iffontfamily@liberation

%%% ---------------------------
%%% 1Ô∏è‚É£ –®—Ä–∏—Ñ—Ç—ã CMU
%%% ---------------------------
\iffontfamily@cmu
\IfFontExistsTF{CMU Typewriter Text}{
  \setmonofont{CMU Typewriter Text}
  \newfontfamily\cyrillicfonttt{CMU Typewriter Text}
}{}
\IfFontExistsTF{CMU Serif}{
  \setmainfont{CMU Serif}
  \newfontfamily\cyrillicfont{CMU Serif}
}{}
\IfFontExistsTF{CMU Sans Serif}{
  \setsansfont{CMU Sans Serif}
  \newfontfamily\cyrillicfontsf{CMU Sans Serif}
}{}
\fi

%%% ---------------------------
%%% 2Ô∏è‚É£ –®—Ä–∏—Ñ—Ç—ã Microsoft
%%% ---------------------------
\iffontfamily@ms
\IfFontExistsTF{Courier New}{
  \setmonofont{Courier New}
  \newfontfamily\cyrillicfonttt{Courier New}
}{}
\IfFontExistsTF{Times New Roman}{
  \setmainfont[
    BoldFont=Times New Roman Bold,
    ItalicFont=Times New Roman Italic,
    BoldItalicFont=Times New Roman Bold Italic
  ]{Times New Roman}
  \newfontfamily\cyrillicfont{Times New Roman}
}{}
\IfFontExistsTF{Arial}{
  \setsansfont{Arial}
  \newfontfamily\cyrillicfontsf{Arial}
}{}
\fi

%%% ---------------------------
%%% 3Ô∏è‚É£ –®—Ä–∏—Ñ—Ç—ã Liberation
%%% ---------------------------
\iffontfamily@liberation
\IfFontExistsTF{LiberationMono}{
  \setmonofont[Scale=0.87]{LiberationMono}
  \newfontfamily\cyrillicfonttt[Scale=0.87]{LiberationMono}
}{}
\IfFontExistsTF{LiberationSerif}{
  \setmainfont{LiberationSerif}
  \newfontfamily\cyrillicfont{LiberationSerif}
}{}
\IfFontExistsTF{LiberationSans}{
  \setsansfont{LiberationSans}
  \newfontfamily\cyrillicfontsf{LiberationSans}
}{}
\fi

%%% ---------------------------
%%% ‚öôÔ∏è Fallback (CMU), –µ—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω —Ñ–ª–∞–≥ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
%%% ---------------------------
%\if@xem@cmu\else
%\if@xem@ms\else
%\if@xem@liberation\else
\iffontfamily@cmu\else
\iffontfamily@ms\else
\iffontfamily@liberation\else
\IfFontExistsTF{CMU Typewriter Text}{
  \setmonofont{CMU Typewriter Text}
  \newfontfamily\cyrillicfonttt{CMU Typewriter Text}
}{}
\IfFontExistsTF{CMU Serif}{
  \setmainfont{CMU Serif}
  \newfontfamily\cyrillicfont{CMU Serif}
}{}
\IfFontExistsTF{CMU Sans Serif}{
  \setsansfont{CMU Sans Serif}
  \newfontfamily\cyrillicfontsf{CMU Sans Serif}
}{}
\fi\fi\fi

\endinput
